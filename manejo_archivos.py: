# manejo_archivos.py
# Módulo para trabajar con archivos de inscripciones

def guardar(nombre, correo, charla, archivo="inscripciones_charlas.txt"):
    """
    Guarda una inscripción en el archivo.
    Cada línea contiene: nombre, correo y charla.
    """
    try:
        with open(archivo, "a", encoding="utf-8") as f:
            f.write(f"{nombre};{correo};{charla}\n")
    except Exception as error:
        print("Ocurrió un problema al guardar la inscripción:", error)


def cargar(archivo="inscripciones_charlas.txt"):
    """
    Lee todas las inscripciones guardadas en el archivo.
    Devuelve una lista de diccionarios.
    """
    lista = []
    try:
        with open(archivo, "r", encoding="utf-8") as f:
            for linea in f:
                partes = linea.strip().split(";")
                if len(partes) == 3:
                    registro = {"nombre": partes[0], "correo": partes[1], "charla": partes[2]}
                    lista.append(registro)
    except FileNotFoundError:
        # Si el archivo no existe, se crea vacío
        open(archivo, "w").close()
    return lista
